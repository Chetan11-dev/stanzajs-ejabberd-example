Pubsub
It is more prudent and time saving to use the services of other providers such as firebase to implement pubsub then to do it by yourself as a professional level pubsub implementation takes a lot of time and effort to build it.

Messsaging
MongooseIM is also an XMPP based MUC project that might be helpful to look into.
